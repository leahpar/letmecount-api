
@apiUrl = http://localhost:8888

### Login
POST {{apiUrl}}/auth
Content-Type: application/ld+json
Accept: application/ld+json

{
    "username": "test",
    "password": "test"
}
> {%
    client.global.set("token", `${response.body.token}`)
    client.global.set("refresh_token", `${response.body.refresh_token}`)
%}

### Refresh Token
POST {{apiUrl}}/auth/refresh
Content-Type: application/ld+json
Accept: application/ld+json

{
    "refresh_token": "{{refresh_token}}"
}
> {%
    client.global.set("token", `${response.body.token}`)
    client.global.set("refresh_token", `${response.body.refresh_token}`)
%}

### Logout
POST {{apiUrl}}/auth/logout
Content-Type: application/ld+json
Authorization: Bearer {{token}}

{
    "refresh_token": "{{refresh_token}}"
}

### test
GET {{apiUrl}}/test/
Authorization: Bearer {{token}}

### Créer une dépense
POST {{apiUrl}}/depenses
Content-Type: application/ld+json
Accept: application/ld+json
Authorization: Bearer {{token}}

{
    "date": "2024-01-15T00:00:00+00:00",
    "montant": 50.00,
    "titre": "Restaurant",
    "partage": "parts",
    "details": [
        {
            "parts": 2,
            "montant": 25.00
        },
        {
            "user": "/api/users/2",
            "parts": 1,
            "montant": 25.00
        }
    ]
}

### Modifier une dépense
PUT {{apiUrl}}/depenses/1
Content-Type: application/ld+json
Authorization: Bearer {{token}}

{
    "date": "2024-01-16T00:00:00+00:00",
    "montant": 60.00,
    "titre": "Restaurant modifié",
    "partage": "montants",
    "details": [
        {
            "user": "/api/users/1",
            "parts": 1,
            "montant": 30.00
        },
        {
            "user": "/api/users/2",
            "parts": 1,
            "montant": 30.00
        }
    ]
}

### Supprimer une dépense
DELETE {{apiUrl}}/depenses/1
Authorization: Bearer {{token}}

### Lister les utilisateurs
GET {{apiUrl}}/users
Authorization: Bearer {{token}}

### Lister les utilisateurs avec recherche
GET {{apiUrl}}/users?username=test
Authorization: Bearer {{token}}

### Récupérer un utilisateur spécifique
GET {{apiUrl}}/users/1
Authorization: Bearer {{token}}

### Lister toutes les dépenses d'un user
GET {{apiUrl}}/depenses?details.user=1
Authorization: Bearer {{token}}

### Récupérer une dépense spécifique
GET {{apiUrl}}/depenses/1
Authorization: Bearer {{token}}
